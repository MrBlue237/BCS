<?php require('template/header.phtml'); ?>

    <div class="container my-5">

        <h1 class="mb-4 text-primary"><?php echo htmlspecialchars($view->placement->getTitle()); ?></h1>

        <!-- Allow to cancel or confirm edit-->
        <?php if (isset($_SESSION['logged_in'])): ?>
            <a href="studentMatches.php" class="btn btn-outline-secondary mb-4">← Back to All Placements</a>
        <?php else:?>
            <a href="browsing.php" class="btn btn-outline-secondary mb-4">← Back to All Placements</a>
        <?php endif; ?>

        <div class="row">

            <div class="col-lg-8">

                <section class="mb-5">
                    <h3 class="border-bottom pb-2">Placement Description</h3>
                    <p class="text-secondary"><?php echo nl2br(htmlspecialchars($view->placement->getDescription())); ?></p>
                </section>

                <section class="mb-5">
                    <h3 class="border-bottom pb-2">About Us</h3>
                    <p class="text-secondary"><?php echo nl2br(htmlspecialchars($view->placement->getAboutCompany())); ?></p>
                </section>

                <section class="mb-5">
                    <h3 class="border-bottom pb-2">What We Offer</h3>
                    <p class="text-secondary"><?php echo nl2br(htmlspecialchars($view->placement->getWhatWeOffer())); ?></p>
                </section>

                <?php /* // This section requires your controller to fetch the skills via a method like:
            // $view->requiredSkills = $placementsDataSet->fetchRequiredSkillsByPlacementID($post_id);
            if (isset($view->requiredSkills) && !empty($view->requiredSkills)):
            */ ?>
            </div>

            <div class="col-lg-4">
                <div class="card bg-light p-3 sticky-top" style="top: 20px;">
                    <h4 class="card-title mb-3">Key Details</h4>
                    <dl class="row mb-0">
                        <dt class="col-sm-5">Salary:</dt>
                        <dd class="col-sm-7 fw-bold">£<?php echo htmlspecialchars($view->placement->getSalary()); ?></dd>

                        <dt class="col-sm-5">Location:</dt>
                        <dd class="col-sm-7"><?php echo htmlspecialchars($view->placement->getLocation()); ?></dd>

                        <dt class="col-sm-5">Start Date:</dt>
                        <dd class="col-sm-7"><?php echo htmlspecialchars($view->placement->getStartDate()); ?></dd>

                        <dt class="col-sm-5">End Date:</dt>
                        <dd class="col-sm-7"><?php echo htmlspecialchars($view->placement->getEndDate()); ?></dd>

                        <dt class="col-sm-5">Deadline:</dt>
                        <dd class="col-sm-7 text-danger fw-bold"><?php echo htmlspecialchars($view->placement->getDeadline()); ?></dd>
                    </dl>
                </div>

                <?php /* // Example: Add an "Apply Now" button if the post is active and deadline hasn't passed
            if ($view->placement->getStatus() === 'active' && strtotime($view->placement->getDeadline()) >= time()):
            */ ?>
            </div>
        </div>
    </div>

<?php require('template/footer.phtml'); ?>